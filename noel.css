/* =========================================================
   Grimoire — Thème Noël (global override, non destructif)
   Active le thème en ajoutant la classe .christmas sur <html> ou <body>
   Exemple: <body class="christmas">
   ========================================================= */

/* ---------- Palette & bases ---------- */
:root.christmas,
body.christmas {
  --bg:#050811;
  --panel:#0b1020;
  --panel-2:#050915;
  --text:#f5f7ff;
  --muted:#bac4dd;

  /* Accents Noël */
  --accent: #3fb9ff;
  --accent-2:#27c27a;
  --accent-gold:#f3d08a;
  --accent-red:#f97373;
}

/* Fond global : nuit d’hiver avec aurores */
body.christmas {
  background:
    radial-gradient(1200px 600px at 10% 0%, rgba(63,185,255,.22), transparent 60%),
    radial-gradient(1000px 700px at 90% 0%, rgba(39,194,122,.18), transparent 60%),
    radial-gradient(1600px 900px at 50% 130%, rgba(0,0,0,.85), #020617);
  color:var(--text);
}

/* Texte global */
body.christmas,
body.christmas *{
  text-rendering:optimizeLegibility;
}

/* Liens */
body.christmas a{
  color:var(--accent);
}
body.christmas a:hover{
  color:var(--accent-gold);
}

/* =========================================================
   Effets féeriques : neige + paillettes
   ========================================================= */

body.christmas::before,
body.christmas::after{
  content:"";
  position:fixed;
  inset:-10%;
  pointer-events:none;
  z-index:1;
  background-image:
    radial-gradient(2px 2px at 10% 20%, rgba(255,255,255,.9) 0, transparent 55%),
    radial-gradient(3px 3px at 40% 80%, rgba(255,255,255,.6) 0, transparent 55%),
    radial-gradient(2px 2px at 70% 10%, rgba(255,255,255,.8) 0, transparent 55%),
    radial-gradient(3px 3px at 90% 50%, rgba(255,255,255,.7) 0, transparent 55%);
  opacity:.35;
}

body.christmas::before{
  animation: snowFallA 32s linear infinite;
}
body.christmas::after{
  animation: snowFallB 48s linear infinite;
  filter:blur(.4px);
}

@keyframes snowFallA{
  0%{ transform: translateY(-10px); }
  100%{ transform: translateY(25px); }
}
@keyframes snowFallB{
  0%{ transform: translateY(-25px); }
  100%{ transform: translateY(35px); }
}

/* Neige un peu allégée sur mobile */
@media (max-width: 640px){
  body.christmas::before,
  body.christmas::after{
    opacity:.22;
  }
}

/* Aura décorative adaptée pour Noël */
body.christmas .aura{
  mix-blend-mode: screen;
  opacity:.75;
}
body.christmas .aura::before{
  background: radial-gradient(closest-side, rgba(63,185,255,.40), transparent 60%);
}
body.christmas .aura::after{
  background: radial-gradient(closest-side, rgba(243,208,138,.32), transparent 60%);
}

/* =========================================================
   Layout & panneaux
   ========================================================= */

body.christmas .app,
body.christmas main{
  background:transparent;
}

/* Panneaux / cards */
body.christmas .panel,
body.christmas .card,
body.christmas .profile-panel,
body.christmas .stats-card{
  background:
    radial-gradient(500px 260px at 10% 0%, rgba(63,185,255,.12), transparent 60%),
    radial-gradient(520px 260px at 90% 0%, rgba(39,194,122,.12), transparent 60%),
    linear-gradient(180deg,#050915,#020617);
  border-radius:18px;
  border:1px solid rgba(148,163,184,.28);
  box-shadow:
    0 0 0 1px rgba(15,23,42,.9) inset,
    0 18px 48px rgba(0,0,0,.85);
  backdrop-filter: blur(16px);
}

/* Header des panneaux : ruban de Noël */
body.christmas .panel .hd,
body.christmas .card-header,
body.christmas .stats-card-header{
  position:relative;
  overflow:hidden;
}

body.christmas .panel .hd::before,
body.christmas .card-header::before,
body.christmas .stats-card-header::before{
  content:"";
  position:absolute;
  inset:-1px;
  background:
    repeating-linear-gradient(
      135deg,
      rgba(243,208,138,.28) 0,
      rgba(243,208,138,.28) 8px,
      rgba(39,194,122,.25) 8px,
      rgba(39,194,122,.25) 16px
    );
  opacity:.35;
  pointer-events:none;
}

body.christmas .panel .hd > *,
body.christmas .card-header > *,
body.christmas .stats-card-header > *{
  position:relative;
  z-index:1;
}

/* Titres des panneaux */
body.christmas .panel-title,
body.christmas .stats-title,
body.christmas h2,
body.christmas h3{
  color:var(--text);
  letter-spacing:.08em;
  text-transform:uppercase;
}

/* Stats individuelles */
body.christmas .stat .l,
body.christmas .stat-label{
  color:var(--muted);
}

body.christmas .stat .v,
body.christmas .stat-value{
  color:var(--accent-gold);
  text-shadow:0 0 18px rgba(63,185,255,.5);
}

/* Mini-cards de collection (si utilisées sur d’autres pages) */
body.christmas .mini-card{
  background:
    radial-gradient(280px 200px at 0% 0%, rgba(63,185,255,.16), transparent 60%),
    linear-gradient(180deg,#050915,#020617);
  border-radius:14px;
  border:1px solid rgba(148,163,184,.35);
}

/* =========================================================
   HERO d’accueil / bandeau Twitch
   ========================================================= */

/* Hero global (bandeau du haut) */
body.christmas .hero-header{
  background:
    radial-gradient(1200px 600px at 15% 0%, rgba(63,185,255,.25), transparent 60%),
    radial-gradient(1100px 700px at 85% 0%, rgba(39,194,122,.20), transparent 60%),
    linear-gradient(180deg,#050811,#050915) !important;
  border-bottom:1px solid rgba(243,208,138,.45) !important;
  box-shadow:0 22px 60px rgba(0,0,0,.9);
  position:relative;
  overflow:hidden;
}

/* Neige localisée dans le hero */
body.christmas .hero-header::before{
  content:"";
  position:absolute;
  inset:-10%;
  pointer-events:none;
  background-image:
    radial-gradient(2px 2px at 10% 20%, rgba(255,255,255,.9) 0, transparent 55%),
    radial-gradient(3px 3px at 40% 80%, rgba(255,255,255,.6) 0, transparent 55%),
    radial-gradient(2px 2px at 70% 10%, rgba(255,255,255,.8) 0, transparent 55%),
    radial-gradient(3px 3px at 90% 50%, rgba(255,255,255,.7) 0, transparent 55%);
  opacity:.55;
  animation: snowFallHero 24s linear infinite;
  z-index:0;
}

@keyframes snowFallHero{
  0%{ transform: translateY(-15px); }
  100%{ transform: translateY(25px); }
}

body.christmas .hero-header .hero-center{
  position:relative;
  z-index:1;
}

/* Logo => boule de Noël suspendue */
body.christmas .hero-logo{
  border-radius:999px;
  background:
    radial-gradient(80% 80% at 30% 20%, rgba(255,255,255,.45), transparent 60%),
    conic-gradient(from 0deg,#f3d08a,#3fb9ff,#27c27a,#f3d08a);
  box-shadow:
    0 0 24px rgba(243,208,138,.7),
    0 0 0 2px rgba(255,255,255,.35) inset;
  position:relative;
}
body.christmas .hero-logo::before{
  content:"";
  position:absolute;
  top:-10px; left:50%;
  width:22px; height:10px;
  transform:translateX(-50%);
  border-radius:6px 6px 3px 3px;
  background:linear-gradient(180deg,#f3f4ff,#cbd5f5);
}
body.christmas .hero-logo::after{
  content:"";
  position:absolute;
  top:-26px; left:50%;
  width:2px; height:18px;
  transform:translateX(-50%);
  background:linear-gradient(180deg,#f3f4ff,transparent);
  opacity:.9;
}

/* Titre principal glacé */
body.christmas .hero-title{
  background: linear-gradient(120deg,#f3f4ff,#f3d08a,#3fb9ff);
  -webkit-background-clip:text;
  color:transparent;
  text-shadow:0 0 18px rgba(63,185,255,.55);
}

/* Sous-titre plus doux */
body.christmas .hero-subtitle,
body.christmas .hero-desc{
  color: color-mix(in oklab, var(--muted), #ffffff 30%);
}

/* Actions du hero (connecté) */
body.christmas .hero-header .hero-actions .btn{
  border-radius:999px;
  padding-inline:16px;
}

/* User bar */
body.christmas #user-bar{
  background:rgba(5,8,17,.95) !important;
  border-color:rgba(243,208,138,.55) !important;
  box-shadow:
    0 0 0 1px rgba(15,23,42,.9) inset,
    0 10px 30px rgba(0,0,0,.85) !important;
}

/* =========================================================
   Guest CTA : “Festival d’Hiver” (non connecté)
   ========================================================= */

body.christmas #guest-cta{
  border-radius:20px;
  border:1px solid rgba(243,208,138,.4) !important;
  box-shadow:0 24px 70px rgba(0,0,0,.9) !important;
  background:
    radial-gradient(500px 260px at 10% 0%, rgba(63,185,255,.32), transparent 60%),
    radial-gradient(520px 260px at 90% 0%, rgba(39,194,122,.26), transparent 60%),
    linear-gradient(135deg,#050915,#020617);
  position:relative;
  overflow:hidden;
}

body.christmas #guest-cta::before{
  content:"";
  position:absolute;
  inset:-1px;
  background:
    repeating-linear-gradient(
      135deg,
      rgba(243,208,138,.25) 0,
      rgba(243,208,138,.25) 10px,
      rgba(63,185,255,.15) 10px,
      rgba(63,185,255,.15) 20px
    );
  mix-blend-mode:soft-light;
  opacity:.35;
}

body.christmas #guest-cta .hero-bg{
  filter:saturate(1.2) contrast(1.05) brightness(1.03);
}

body.christmas #guest-cta .hero-content{
  position:relative;
  z-index:1;
}

body.christmas #guest-cta h1{
  text-shadow:0 0 22px rgba(63,185,255,.6);
}
body.christmas #guest-cta .subtitle{
  color: color-mix(in oklab, var(--muted), #ffffff 35%);
}

/* Bouton Twitch principal dans le hero invité */
body.christmas #guest-cta .btn-hero{
  background: linear-gradient(135deg,#f3d08a,#27c27a) !important;
  color:#050811 !important;
  box-shadow:
    0 0 0 1px rgba(255,255,255,.4) inset,
    0 16px 40px rgba(15,118,110,.75);
}

/* =========================================================
   Header / topbar / navigation
   ========================================================= */

body.christmas .site-header{
  background: linear-gradient(180deg,rgba(15,23,42,.96),rgba(2,6,23,.96));
  border-bottom:1px solid rgba(148,163,184,.4);
  backdrop-filter: blur(18px);
}

body.christmas .site-header .brand-name{
  color:var(--text);
}

body.christmas .nav-links a{
  color:var(--muted);
}
body.christmas .nav-links a:hover,
body.christmas .nav-links a:focus-visible{
  color:var(--accent-gold);
}

/* Twitch pill */
body.christmas .twitch-cta{
  background: linear-gradient(135deg,#a855f7,#ec4899);
  color:#0b0210;
}

/* =========================================================
   Boutons
   ========================================================= */

body.christmas .btn{
  border-radius:999px;
  border:1px solid rgba(148,163,184,.45);
  background: radial-gradient(120% 180% at 30% 0%, rgba(63,185,255,.35), rgba(15,23,42,1));
  color:var(--text);
  box-shadow:
    0 0 0 1px rgba(15,23,42,1) inset,
    0 14px 34px rgba(15,23,42,.9);
  transition:
    transform .16s ease-out,
    box-shadow .16s ease-out,
    background .16s ease-out;
}

body.christmas .btn:hover{
  transform: translateY(-1px);
  box-shadow:
    0 0 0 1px rgba(243,208,138,.50) inset,
    0 18px 40px rgba(63,185,255,.45);
}

/* Icônes / lettres dans les boutons */
body.christmas .btn{
  letter-spacing:.02em;
}
body.christmas .btn::first-letter{
  filter: drop-shadow(0 0 6px rgba(243,208,138,.7));
}

/* Boutons ghost */
body.christmas .btn.ghost{
  background:transparent;
  border-color:rgba(148,163,184,.5);
}

/* Boutons d’alerte */
body.christmas .btn.warn{
  background: linear-gradient(180deg,#facc15,#eab308) !important;
  color:#1f1305 !important;
}
body.christmas .btn.danger{
  background: linear-gradient(180deg,#f97373,#ef4444) !important;
  color:#0b0202 !important;
}

/* Bouton de thème Noël “ON” */
:root.christmas #toggle-christmas,
body.christmas #toggle-christmas{
  background: linear-gradient(180deg,#27c27a,#159b57) !important;
  color:#02140a !important;
  box-shadow:
    0 0 0 1px rgba(243,208,138,.55) inset,
    0 12px 30px rgba(39,194,122,.45) !important;
}

/* =========================================================
   Sets / collection
   ========================================================= */

body.christmas .set-card,
body.christmas .set,
body.christmas .collection-card{
  background:
    radial-gradient(140% 200% at 0% 0%, rgba(63,185,255,.22), transparent 60%),
    radial-gradient(120% 220% at 100% 0%, rgba(39,194,122,.18), transparent 60%),
    linear-gradient(180deg,#020617,#020617);
  border-radius:16px;
  border:1px solid rgba(148,163,184,.35);
  box-shadow:
    0 0 0 1px rgba(15,23,42,1) inset,
    0 16px 40px rgba(0,0,0,.9);
}

/* Badge pour un set d’event Noël */
body.christmas .set.is-christmas{
  border-color:rgba(243,208,138,.55) !important;
  box-shadow:
    0 0 32px rgba(63,185,255,.25),
    0 22px 60px rgba(0,0,0,.85) !important;
}
body.christmas .set.is-christmas .overlay{
  border-color:rgba(243,208,138,.45) !important;
}
body.christmas .set.is-christmas .name::after{
  content:" ✨";
}

/* Survol des cartes */
@media (prefers-reduced-motion: no-preference){
  body.christmas .card:hover,
  body.christmas .collection-card:hover,
  body.christmas .set:hover{
    transform: translateY(-4px) rotate3d(0,1,0,3deg) scale(1.02);
  }
}

/* =========================================================
   Pack chooser
   ========================================================= */

body.christmas #pack-chooser{
  background:
    radial-gradient(600px 320px at 10% 0%, rgba(63,185,255,.28), transparent 60%),
    radial-gradient(620px 340px at 90% 0%, rgba(39,194,122,.22), transparent 60%),
    linear-gradient(180deg,#020617,#020617);
  border-radius:18px;
  border:1px solid rgba(148,163,184,.45);
  box-shadow:
    0 0 0 1px rgba(15,23,42,1) inset,
    0 18px 48px rgba(0,0,0,.9);
}

/* Boutons de packs en mode “paquet cadeau” */
/* Boutons de packs en mode “paquet cadeau” (sans zébrures) */
body.christmas #pack-chooser .btn{
  background:
    radial-gradient(140% 220% at 0% 0%, rgba(243,208,138,.45), transparent 55%),
    radial-gradient(130% 200% at 100% 0%, rgba(63,185,255,.35), transparent 55%),
    linear-gradient(180deg,#020617,#020617) !important;
  color:#f9fafb !important;
  border-radius:999px;
  border:1px solid rgba(243,208,138,.65);
  box-shadow:
    0 0 0 1px rgba(15,23,42,1) inset,
    0 14px 34px rgba(0,0,0,.9),
    0 0 22px rgba(63,185,255,.35);
  letter-spacing:.03em;
  text-transform:none;
}

body.christmas #pack-chooser .btn:hover{
  transform: translateY(-1px);
  box-shadow:
    0 0 0 1px rgba(243,208,138,.85) inset,
    0 18px 40px rgba(63,185,255,.55),
    0 0 26px rgba(243,208,138,.55);
}


/* Badge de balance de packs (peut servir de “calendrier de l’Avent”) */
body.christmas #packs-balance-badge{
  border-radius:999px;
  border:1px solid rgba(243,208,138,.5);
  background: radial-gradient(140% 180% at 0% 0%, rgba(63,185,255,.32), rgba(15,23,42,1));
  color:var(--accent-gold);
}

/* =========================================================
   Pack opening (overlay)
   ========================================================= */

body.christmas #pack-overlay .po-backdrop{
  background:
    radial-gradient(1200px 600px at 10% -10%, rgba(63,185,255,.25), transparent 60%),
    radial-gradient(900px 500px at 110% 10%, rgba(39,194,122,.22), transparent 60%),
    rgba(3,5,12,.92) !important;
}

/* Corps du pack = papier cadeau */
body.christmas .po-pack-body{
  position:relative;
  background:
    radial-gradient(130px 70px at 20% 20%, rgba(63,185,255,.38), transparent 65%),
    radial-gradient(110px 60px at 80% 25%, rgba(39,194,122,.34), transparent 65%),
    linear-gradient(180deg,#0c1324,#050915) !important;
  border:1px solid rgba(255,255,255,.14) !important;
  box-shadow:
    0 0 0 1px rgba(63,185,255,.18) inset,
    0 24px 60px rgba(0,0,0,.85) !important;
}

/* Texture papier cadeau rayé */
body.christmas .po-pack-body::after{
  content:"";
  position:absolute;
  inset:12px;
  border-radius:14px;
  background:
    repeating-linear-gradient(
      -45deg,
      rgba(243,208,138,.18) 0,
      rgba(243,208,138,.18) 8px,
      rgba(63,185,255,.10) 8px,
      rgba(63,185,255,.10) 16px
    );
  mix-blend-mode:soft-light;
  opacity:.8;
  pointer-events:none;
}

/* Fente lumineuse */
body.christmas .po-slit{
  background: linear-gradient(180deg,#fff,rgba(255,255,255,.03));
  box-shadow:
    0 0 28px rgba(255,255,255,.8),
    0 0 90px rgba(63,185,255,.55) !important;
}

/* “Voile” magique au-dessus du pack */
body.christmas .po-veil{
  background:
    radial-gradient(260px 120px at 50% 0%, rgba(243,208,138,.45), transparent 70%),
    radial-gradient(260px 160px at 0% 0%, rgba(63,185,255,.30), transparent 70%),
    radial-gradient(260px 160px at 100% 0%, rgba(39,194,122,.30), transparent 70%);
  mix-blend-mode:screen;
  opacity:.9;
}

/* Cartes dans l’overlay (état révélé) */
body.christmas .po-card{
  background:
    radial-gradient(140px 80px at 0% 0%, rgba(63,185,255,.26), transparent 60%),
    radial-gradient(140px 80px at 100% 0%, rgba(243,208,138,.26), transparent 60%),
    radial-gradient(120px 80px at 30% 20%, rgba(63,185,255,.20), transparent 60%),
    linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.80)) !important;
  border-radius:14px;
  border:1px solid rgba(248,250,252,.35);
}

/* Glow selon la rareté (si tu utilises ces classes) */
body.christmas .po-card.glow-rare{
  box-shadow:0 0 24px rgba(63,185,255,.55) !important;
}
body.christmas .po-card.glow-legendary{
  box-shadow:0 0 28px rgba(243,208,138,.75) !important;
}
body.christmas .po-card.glow-exotic,
body.christmas .po-card.glow-incandescent{
  box-shadow:
    0 0 30px rgba(243,208,138,.90),
    0 0 60px rgba(63,185,255,.75) !important;
}

/* Hover des cartes de pack */
@media (prefers-reduced-motion: no-preference){
  body.christmas .po-card:hover{
    transform: translateY(-4px) scale(1.03);
  }
}

/* =========================================================
   XP / progression / barres
   ========================================================= */

/* Conteneur */
body.christmas #xp-wrap,
body.christmas .xp-section{
  background:
    radial-gradient(500px 260px at 10% 0%, rgba(63,185,255,.16), transparent 60%),
    radial-gradient(520px 260px at 90% 0%, rgba(39,194,122,.16), transparent 60%),
    linear-gradient(180deg,#050915,#020617);
}

/* Barres génériques */
body.christmas .xp-bar,
body.christmas .progress-bar,
body.christmas .xpbar{
  background: rgba(15,23,42,.9) !important;
  border-radius:999px;
  overflow:hidden;
  border:1px solid rgba(15,23,42,1);
}

/* Fills génériques */
body.christmas .xp-bar-fill,
body.christmas .progress-fill,
body.christmas .xpbar .fill,
body.christmas #xp-fill{
  background: linear-gradient(90deg,#27c27a,#3fb9ff,#f3d08a) !important;
  box-shadow:
    0 0 12px rgba(39,194,122,.6),
    0 0 26px rgba(63,185,255,.55) inset !important;
}

/* =========================================================
   Bannières / toasts / tags
   ========================================================= */

body.christmas .banner{
  background:linear-gradient(90deg,rgba(63,185,255,.18),rgba(243,208,138,.20));
  border-radius:14px;
  border:1px solid rgba(243,208,138,.55);
}

/* Bannière “nouvelle carte” → plus visible en Noël */
body.christmas .banner.new-card{
  background: linear-gradient(90deg, rgba(63,185,255,.26), rgba(243,208,138,.28));
  border-color: rgba(243,208,138,.7);
}

/* Toast */
body.christmas .toast{
  background:rgba(5,8,17,.96);
  border-color:rgba(243,208,138,.55);
}

/* Tags & badges */
body.christmas .tag,
body.christmas .badge{
  border-radius:999px;
  border:1px solid rgba(148,163,184,.45);
  background:rgba(15,23,42,.95);
  color:var(--muted);
}

body.christmas .text-muted{
  color:var(--muted);
}
