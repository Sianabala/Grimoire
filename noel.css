/* =========================================================
   Grimoire ‚Äî Th√®me No√´l (global override, non destructif)
   Active le th√®me en ajoutant la classe .christmas sur <body> ou <html>
   Exemple: <body class="christmas">
   ========================================================= */

/* ---------- Palette & bases ---------- */
:root.christmas,
body.christmas {
  --bg:#050811;
  --panel:#0b1020;
  --panel-2:#050915;
  --text:#f5f7ff;
  --muted:#bac4dd;

  /* Accents No√´l */
  --accent:#27c27a;       /* vert sapin lumineux */
  --accent-2:#3fb9ff;     /* bleu glac√© */
  --copper:#f3d08a;       /* or doux */

  --success:#22c55e;
  --warning:#facc15;
  --danger:#f97373;

  --shadow:0 24px 70px rgba(0,0,0,.6);
  --shadow-sm:0 10px 30px rgba(0,0,0,.35);
}

/* ---------- Fond global + aura ---------- */
:root.christmas body,
body.christmas {
  background:
    radial-gradient(1200px 600px at 10% -10%, rgba(63,185,255,.20), transparent 60%),
    radial-gradient(900px 600px at 110% 10%, rgba(39,194,122,.18), transparent 60%),
    radial-gradient(1100px 800px at 50% 120%, rgba(243,208,138,.10), transparent 60%),
    linear-gradient(180deg,#050811 0%,#050811 100%) !important;
  color:var(--text);
}

/* Scrollbar glac√©e */
body.christmas *::-webkit-scrollbar-thumb{
  background: linear-gradient(180deg, rgba(63,185,255,.8), rgba(39,194,122,.7)) !important;
  border-radius:999px;
  border:2px solid rgba(5,8,17,.7) !important;
}
body.christmas *{
  scrollbar-color: rgba(63,185,255,.5) rgba(255,255,255,.05);
}

/* Aura un peu plus froide */
body.christmas .aura{
  mix-blend-mode: screen;
  opacity:.75;
}

/* ---------- Header / topbar ---------- */
body.christmas .site-header{
  background:linear-gradient(180deg, rgba(6,11,24,.95), rgba(6,11,24,.78)) !important;
  border-bottom:1px solid rgba(243,208,138,.32) !important;
}

/* Logo Grimoire : halo or + sapin */
body.christmas .brand-logo{
  box-shadow:
    0 0 18px rgba(243,208,138,.6),
    0 0 0 1px rgba(255,255,255,.16) inset !important;
  background: conic-gradient(
    from 0deg,
    rgba(243,208,138,1),
    rgba(63,185,255,.9),
    rgba(39,194,122,1),
    rgba(243,208,138,1)
  ) !important;
}

/* ---------- Hero ---------- */
body.christmas .hero-header{
  background: linear-gradient(180deg, rgba(5,8,17,.96), rgba(5,8,17,.78)) !important;
  border-bottom:1px solid rgba(243,208,138,.28) !important;
}

/* Hero background : flocons + l√©ger voile */
body.christmas .hero-bg::before{
  content:"";
  position:absolute; inset:-10%; pointer-events:none;
  background:
    radial-gradient(60% 40% at 10% 10%, rgba(63,185,255,.16), transparent 60%),
    radial-gradient(70% 50% at 85% 15%, rgba(39,194,122,.12), transparent 60%),
    radial-gradient(70% 70% at 50% 100%, rgba(0,0,0,.35), transparent 70%);
  filter: blur(10px);
  opacity:.9;
}
body.christmas .hero-bg::after{
  content:"";
  position:absolute; inset:0; pointer-events:none;
  background-image:
    radial-gradient(circle at 10% 20%, rgba(255,255,255,.45) 1px, transparent 0),
    radial-gradient(circle at 30% 10%, rgba(255,255,255,.35) 1px, transparent 0),
    radial-gradient(circle at 70% 15%, rgba(255,255,255,.4) 1px, transparent 0),
    radial-gradient(circle at 90% 25%, rgba(255,255,255,.30) 1px, transparent 0),
    radial-gradient(circle at 20% 70%, rgba(255,255,255,.38) 1px, transparent 0),
    radial-gradient(circle at 60% 80%, rgba(255,255,255,.32) 1px, transparent 0);
  background-size: 180px 180px;
  mix-blend-mode: screen;
  opacity:.55;
}

/* Titre + sous-titre un peu plus ‚Äúfestif‚Äù */
@supports (font-variation-settings: normal){
  body.christmas .hero-title{
    letter-spacing:.7px;
  }
}

/* Hero logo : sapin avec halo tournant */
body.christmas .hero-logo{
  position:relative;
  background:none !important;
  box-shadow:none !important;
}
body.christmas .hero-logo::before{
  content:"";
  position:absolute; inset:-10px;
  border-radius:999px;
  background: conic-gradient(
    from 0deg,
    rgba(243,208,138,.7),
    rgba(63,185,255,.6),
    rgba(39,194,122,.7),
    rgba(243,208,138,.7)
  );
  filter: blur(6px);
  animation: xmasHalo 7s linear infinite;
}
body.christmas .hero-logo::after{
  content:"üéÑ";
  position:relative;
  display:grid; place-items:center;
  width:100%; height:100%;
  font-size:52px; line-height:1;
  text-shadow:0 4px 12px rgba(0,0,0,.55);
}
@keyframes xmasHalo{
  0%{ transform: rotate(0deg); }
  100%{ transform: rotate(360deg); }
}

/* ---------- Panels, stats, cartes ---------- */
body.christmas .panel{
  background: radial-gradient(circle at top left, rgba(63,185,255,.08), transparent 55%),
              radial-gradient(circle at bottom right, rgba(39,194,122,.10), transparent 55%),
              linear-gradient(180deg,#0b1020,#050915) !important;
  border-color: rgba(255,255,255,.09) !important;
}

/* Stats cards un peu plus lumineuses */
body.christmas .stat{
  background: linear-gradient(180deg,#0c1426,#050915) !important;
  box-shadow: 0 0 0 1px rgba(63,185,255,.18) inset;
}

/* Lueur sur les cartes / vignettes */
body.christmas .card,
body.christmas .po-card,
body.christmas .thumb{
  box-shadow: 0 0 0 1px rgba(63,185,255,.16) inset,
              0 0 32px rgba(63,185,255,.15) !important;
  border-color: rgba(255,255,255,.12) !important;
}

/* Tags de raret√© l√©g√®rement glac√©s */
body.christmas .tag{
  background: rgba(5,12,28,.9) !important;
  border-color: rgba(255,255,255,.14) !important;
}
body.christmas .tag.rarity-legendary{ color:#f3d08a !important; }
body.christmas .tag.rarity-exotic{ color:#3fb9ff !important; }
body.christmas .tag.rarity-incandescent{ color:#27c27a !important; }

/* ---------- Boutons ---------- */
body.christmas .btn{
  background: linear-gradient(180deg, var(--accent), color-mix(in oklab,var(--accent),#000 14%)) !important;
  color:#020409 !important;
  border:1px solid rgba(243,208,138,.55) !important;
  box-shadow: 0 10px 26px rgba(0,0,0,.5) !important;
}
body.christmas .btn.ghost{
  background: transparent !important;
  color:var(--text) !important;
  border:1px solid rgba(255,255,255,.18) !important;
}
body.christmas .btn:hover{
  box-shadow: 0 14px 34px rgba(63,185,255,.32) !important;
}

/* Bouton de th√®me No√´l ‚ÄúON‚Äù */
:root.christmas #toggle-christmas,
body.christmas #toggle-christmas{
  background: linear-gradient(180deg,#27c27a,#159b57) !important;
  color:#02140a !important;
  box-shadow: 0 0 0 1px rgba(243,208,138,.55) inset,
              0 12px 30px rgba(39,194,122,.45) !important;
}

/* ---------- Pack opening (overlay) ---------- */
body.christmas #pack-overlay .po-backdrop{
  background:
    radial-gradient(1200px 600px at 10% -10%, rgba(63,185,255,.25), transparent 60%),
    radial-gradient(900px 500px at 110% 10%, rgba(39,194,122,.22), transparent 60%),
    rgba(3,5,12,.92) !important;
}
body.christmas .po-pack-body{
  background:
    radial-gradient(130px 70px at 20% 20%, rgba(63,185,255,.38), transparent 65%),
    radial-gradient(110px 60px at 80% 25%, rgba(39,194,122,.34), transparent 65%),
    linear-gradient(180deg,#0c1324,#050915) !important;
  border:1px solid rgba(255,255,255,.14) !important;
}
body.christmas .po-slit{
  background: linear-gradient(180deg,#fff,rgba(255,255,255,.3));
  box-shadow: 0 0 28px rgba(255,255,255,.8),
              0 0 90px rgba(63,185,255,.55) !important;
}
body.christmas .po-card .veil{
  background:
    radial-gradient(120px 80px at 30% 20%, rgba(63,185,255,.20), transparent 60%),
    linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.80)) !important;
}

/* ---------- Toast, badge, textes ---------- */
body.christmas .toast{
  background: rgba(6,11,24,.95) !important;
  border-color: rgba(243,208,138,.4) !important;
}
body.christmas .badge{
  background: linear-gradient(135deg,#f3d08a,#27c27a) !important;
  color:#050811 !important;
  box-shadow: 0 4px 18px rgba(243,208,138,.35) !important;
}
body.christmas .subtitle{
  color: color-mix(in oklab, var(--muted), #fff 15%) !important;
}

/* ---------- Modal de choix de pack ---------- */
body.christmas #pack-chooser .modal{
  background: linear-gradient(180deg,#050915,#02030a) !important;
  border-color: rgba(243,208,138,.32) !important;
}
body.christmas #pack-chooser .btn{
  background: linear-gradient(180deg,#27c27a,#159b57) !important;
  color:#020409 !important;
  border:1px solid rgba(243,208,138,.6) !important;
}
body.christmas #pack-chooser .btn.ghost{
  background: transparent !important;
  color:var(--text) !important;
  border:1px solid rgba(255,255,255,.24) !important;
}
body.christmas #pack-chooser .btn:disabled{
  opacity:.55; filter:grayscale(.1);
  cursor:not-allowed;
}

/* ---------- Banni√®re √©v√©nement No√´l ---------- */
.banner.christmas{
  margin:12px auto;
  max-width:1200px;
  padding:10px 12px;
  border-radius:12px;
  background: linear-gradient(90deg, rgba(63,185,255,.20), rgba(39,194,122,.20));
  border:1px solid rgba(243,208,138,.45);
  display:flex; align-items:center; gap:10px;
}

/* ---------- Accessibilit√© ---------- */
body.christmas :is(.btn, a, button, .po-card, .set):focus-visible{
  outline:2px solid var(--accent-2) !important;
  outline-offset:3px !important;
  border-radius:12px !important;
}

/* S√©lection de texte */
body.christmas::selection{
  background: rgba(63,185,255,.35);
  color:#020409;
}
